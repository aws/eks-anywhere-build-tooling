From d760a25907da00d066b4bb1c608ee3fb08007341 Mon Sep 17 00:00:00 2001
From: Prow Bot <prow@amazonaws.com>
Date: Fri, 10 Dec 2021 13:32:09 -0700
Subject: [PATCH 2/3] Remove build files

---
 deploy/charts/cert-manager/BUILD.bazel        | 67 -------------------
 .../charts/cert-manager/templates/BUILD.bazel | 52 --------------
 2 files changed, 119 deletions(-)
 delete mode 100644 deploy/charts/cert-manager/BUILD.bazel
 delete mode 100644 deploy/charts/cert-manager/templates/BUILD.bazel

diff --git a/deploy/charts/cert-manager/BUILD.bazel b/deploy/charts/cert-manager/BUILD.bazel
deleted file mode 100644
index be9a5dab6..000000000
--- a/deploy/charts/cert-manager/BUILD.bazel
+++ /dev/null
@@ -1,67 +0,0 @@
-package(default_visibility = ["//visibility:public"])
-
-load("@io_k8s_repo_infra//defs:pkg.bzl", "pkg_tar")
-load("//build:helm.bzl", "helm_pkg")
-
-pkg_tar(
-    name = "release-tar",
-    srcs = [
-        ":cert-manager",
-    ],
-    extension = "tar.gz",
-    mode = "0644",
-    package_dir = "chart",
-    strip_prefix = ".",
-)
-
-helm_pkg(
-    name = "cert-manager",
-    srcs = ["//deploy/charts/cert-manager/templates:chart-srcs"],
-    chart_name = "cert-manager",
-    chart_yaml = ":Chart.yaml",
-    readme_file = ":README.md",
-    tpl_files = [
-        "//deploy/charts/cert-manager/templates:_helpers.tpl",
-    ],
-    values_yaml = ":values.yaml",
-)
-
-genrule(
-    name = "README",
-    srcs = [
-        "README.template.md",
-        "//:version",
-    ],
-    outs = ["README.md"],
-    cmd = "cat $(location README.template.md) | sed -e \"s:{{RELEASE_VERSION}}:$$(cat $(location //:version)):g\" > $@",
-    stamp = 1,
-    visibility = ["//visibility:public"],
-)
-
-filegroup(
-    name = "chart-srcs",
-    srcs = ["//deploy/charts/cert-manager/templates:chart-srcs"] + glob(
-        [
-            ".helmignore",
-            "Chart.yaml",
-            "README.md",
-            "values.yaml",
-        ],
-    ),
-)
-
-filegroup(
-    name = "package-srcs",
-    srcs = glob(["**"]),
-    tags = ["automanaged"],
-    visibility = ["//visibility:private"],
-)
-
-filegroup(
-    name = "all-srcs",
-    srcs = [
-        ":package-srcs",
-        "//deploy/charts/cert-manager/templates:all-srcs",
-    ],
-    tags = ["automanaged"],
-)
diff --git a/deploy/charts/cert-manager/templates/BUILD.bazel b/deploy/charts/cert-manager/templates/BUILD.bazel
deleted file mode 100644
index f487b1062..000000000
--- a/deploy/charts/cert-manager/templates/BUILD.bazel
+++ /dev/null
@@ -1,52 +0,0 @@
-package(default_visibility = ["//visibility:public"])
-
-load("//build:files.bzl", "modify_file")
-
-modify_file(
-    name = "crds",
-    src = "//deploy/crds:templates.regular",
-    out = "crds.yaml",
-    prefix = """{{- if (semverCompare ">=1.16-0" .Capabilities.KubeVersion.GitVersion) }}
-{{- if .Values.installCRDs }}""",
-    suffix = """{{- end }}
-{{- end }}""",
-    visibility = ["//visibility:private"],
-)
-
-modify_file(
-    name = "crds.legacy",
-    src = "//deploy/crds:templates.legacy",
-    out = "crds.legacy.yaml",
-    prefix = """{{- if (semverCompare "<1.16-0" .Capabilities.KubeVersion.GitVersion) }}
-{{- if .Values.installCRDs }}""",
-    suffix = """{{- end }}
-{{- end }}""",
-    visibility = ["//visibility:private"],
-)
-
-filegroup(
-    name = "chart-srcs",
-    srcs = [
-        "crds.yaml",
-        "crds.legacy.yaml",
-    ] + glob(
-        [
-            "*.yaml",
-            "*.txt",
-        ],
-    ),
-)
-
-filegroup(
-    name = "package-srcs",
-    srcs = glob(["**"]),
-    tags = ["automanaged"],
-    visibility = ["//visibility:private"],
-)
-
-filegroup(
-    name = "all-srcs",
-    srcs = [":package-srcs"],
-    tags = ["automanaged"],
-    visibility = ["//visibility:public"],
-)
-- 
2.29.2

