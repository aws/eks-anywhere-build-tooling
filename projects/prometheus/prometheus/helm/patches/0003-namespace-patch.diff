From 61768304c24596a5d27375594d529b4ec6e02e8a Mon Sep 17 00:00:00 2001
From: "Ostosh, Ivy" <ivyjin215@gmail.com>
Date: Mon, 14 Nov 2022 10:39:06 -0600
Subject: [PATCH] Add namespace to charts

---
 charts/prometheus-server/templates/_helpers.tpl | 4 ++--
 charts/prometheus-server/values.yaml            | 2 ++
 2 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/charts/prometheus-server/templates/_helpers.tpl b/charts/prometheus-server/templates/_helpers.tpl
index 413989f7..bd6d2cc7 100644
--- a/charts/prometheus-server/templates/_helpers.tpl
+++ b/charts/prometheus-server/templates/_helpers.tpl
@@ -165,8 +165,8 @@ Define the prometheus.namespace template if set with forceNamespace or .Release.
 */}}
 {{- define "prometheus.namespace" -}}
 {{- if .Values.forceNamespace -}}
-{{ printf "namespace: %s" .Values.forceNamespace }}
+{{ printf "namespace: %s" (.Values.forceNamespace | default .Values.defaultNamespace) }}
 {{- else -}}
-{{ printf "namespace: %s" .Release.Namespace }}
+{{ printf "namespace: %s" (.Release.Namespace | default .Values.defaultNamespace) }}
 {{- end -}}
 {{- end -}}
diff --git a/charts/prometheus-server/values.yaml b/charts/prometheus-server/values.yaml
index 104658d3..1050b4fe 100644
--- a/charts/prometheus-server/values.yaml
+++ b/charts/prometheus-server/values.yaml
@@ -4,6 +4,8 @@ rbac:
 podSecurityPolicy:
   enabled: false
 
+defaultNamespace: "observability"
+
 sourceRegistry: "783794618700.dkr.ecr.us-west-2.amazonaws.com"
 imagePullSecrets:
 # - name: "image-pull-secret"
-- 
2.31.0

