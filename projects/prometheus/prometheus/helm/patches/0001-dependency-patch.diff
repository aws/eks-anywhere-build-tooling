From 65c67eae850ad54be7940100d5c51486713bd95c Mon Sep 17 00:00:00 2001
From: "Ostosh, Ivy" <ivyjin215@gmail.com>
Date: Mon, 28 Nov 2022 09:43:58 -0600
Subject: [PATCH] Remove prometheus chart dependencies

---
 charts/prometheus/Chart.yaml                  |   17 -
 charts/prometheus/templates/NOTES.txt         |   76 --
 charts/prometheus/templates/_helpers.tpl      |  115 --
 charts/prometheus/templates/server/cm.yaml    |   29 +-
 .../prometheus/templates/server/deploy.yaml   |   48 -
 charts/prometheus/templates/server/sts.yaml   |   48 -
 charts/prometheus/values.yaml                 | 1011 -----------------
 7 files changed, 1 insertion(+), 1343 deletions(-)

diff --git a/charts/prometheus/Chart.yaml b/charts/prometheus/Chart.yaml
index a1b5cf65..cec3a006 100644
--- a/charts/prometheus/Chart.yaml
+++ b/charts/prometheus/Chart.yaml
@@ -22,20 +22,3 @@ maintainers:
     email: naseem@transit.app
 engine: gotpl
 type: application
-dependencies:
-  - name: kube-state-metrics
-    version: "4.22.*"
-    repository: https://prometheus-community.github.io/helm-charts
-    condition: kubeStateMetrics.enabled
-  - name: prometheus-node-exporter
-    version: "4.5.*"
-    repository: https://prometheus-community.github.io/helm-charts
-    condition: prometheus-node-exporter.enabled
-  - name: prometheus-pushgateway
-    version: "1.21.*"
-    repository: https://prometheus-community.github.io/helm-charts
-    condition: prometheus-pushgateway.enabled
-  - name: alertmanager
-    version: "0.22.*"
-    repository: https://prometheus-community.github.io/helm-charts
-    condition: alertmanager.enabled
diff --git a/charts/prometheus/templates/NOTES.txt b/charts/prometheus/templates/NOTES.txt
index b7406cff..d060377e 100644
--- a/charts/prometheus/templates/NOTES.txt
+++ b/charts/prometheus/templates/NOTES.txt
@@ -34,81 +34,5 @@ Get the Prometheus server URL by running these commands in the same shell:
 {{- end }}
 {{- end }}
 
-{{ if .Values.alertmanager.enabled }}
-The Prometheus alertmanager can be accessed via port {{ .Values.alertmanager.service.servicePort }} on the following DNS name from within your cluster:
-{{ template "prometheus.alertmanager.fullname" . }}.{{ .Release.Namespace }}.svc.cluster.local
-
-{{ if .Values.alertmanager.ingress.enabled -}}
-From outside the cluster, the alertmanager URL(s) are:
-{{- range .Values.alertmanager.ingress.hosts }}
-http://{{ . }}
-{{- end }}
-{{- else }}
-Get the Alertmanager URL by running these commands in the same shell:
-{{- if contains "NodePort" .Values.alertmanager.service.type }}
-  export NODE_PORT=$(kubectl get --namespace {{ .Release.Namespace }} -o jsonpath="{.spec.ports[0].nodePort}" services {{ template "prometheus.alertmanager.fullname" . }})
-  export NODE_IP=$(kubectl get nodes --namespace {{ .Release.Namespace }} -o jsonpath="{.items[0].status.addresses[0].address}")
-  echo http://$NODE_IP:$NODE_PORT
-{{- else if contains "LoadBalancer" .Values.alertmanager.service.type }}
-  NOTE: It may take a few minutes for the LoadBalancer IP to be available.
-        You can watch the status of by running 'kubectl get svc --namespace {{ .Release.Namespace }} -w {{ template "prometheus.alertmanager.fullname" . }}'
-
-  export SERVICE_IP=$(kubectl get svc --namespace {{ .Release.Namespace }} {{ template "prometheus.alertmanager.fullname" . }} -o jsonpath='{.status.loadBalancer.ingress[0].ip}')
-  echo http://$SERVICE_IP:{{ .Values.alertmanager.service.servicePort }}
-{{- else if contains "ClusterIP"  .Values.alertmanager.service.type }}
-  export POD_NAME=$(kubectl get pods --namespace {{ .Release.Namespace }} -l "app={{ template "prometheus.name" . }},component={{ .Values.alertmanager.name }}" -o jsonpath="{.items[0].metadata.name}")
-  kubectl --namespace {{ .Release.Namespace }} port-forward $POD_NAME 9093
-{{- end }}
-{{- end }}
-
-{{- if .Values.alertmanager.persistence.enabled }}
-{{- else }}
-#################################################################################
-######   WARNING: Persistence is disabled!!! You will lose your data when   #####
-######            the AlertManager pod is terminated.                       #####
-#################################################################################
-{{- end }}
-{{- end }}
-
-{{- if (index .Values "prometheus-node-exporter" "enabled") }}
-#################################################################################
-######   WARNING: Pod Security Policy has been disabled by default since    #####
-######            it deprecated after k8s 1.25+. use                        #####
-######            (index .Values "prometheus-node-exporter" "rbac"          #####
-###### .          "pspEnabled") with (index .Values                         #####
-######            "prometheus-node-exporter" "rbac" "pspAnnotations")       #####
-######            in case you still need it.                                #####
-#################################################################################
-{{- end }}
-
-{{ if (index .Values "prometheus-pushgateway" "enabled") }}
-The Prometheus PushGateway can be accessed via port {{ index .Values "prometheus-pushgateway" "service" "port" }} on the following DNS name from within your cluster:
-{{ include "prometheus-pushgateway.fullname" (index .Subcharts "prometheus-pushgateway") }}.{{ .Release.Namespace }}.svc.cluster.local
-
-{{ if (index .Values "prometheus-pushgateway" "ingress" "enabled") -}}
-From outside the cluster, the pushgateway URL(s) are:
-{{- range (index .Values "prometheus-pushgateway" "ingress" "hosts") }}
-http://{{ . }}
-{{- end }}
-{{- else }}
-Get the PushGateway URL by running these commands in the same shell:
-{{- $pushgateway_svc_type := index .Values "prometheus-pushgateway" "service" "type" -}}
-{{- if contains "NodePort" $pushgateway_svc_type }}
-  export NODE_PORT=$(kubectl get --namespace {{ .Release.Namespace }} -o jsonpath="{.spec.ports[0].nodePort}" services {{ include "prometheus-pushgateway.fullname" (index .Subcharts "prometheus-pushgateway") }})
-  export NODE_IP=$(kubectl get nodes --namespace {{ .Release.Namespace }} -o jsonpath="{.items[0].status.addresses[0].address}")
-  echo http://$NODE_IP:$NODE_PORT
-{{- else if contains "LoadBalancer" $pushgateway_svc_type }}
-  NOTE: It may take a few minutes for the LoadBalancer IP to be available.
-        You can watch the status of by running 'kubectl get svc --namespace {{ .Release.Namespace }} -w {{ include "prometheus-pushgateway.fullname" (index .Subcharts "prometheus-pushgateway") }}'
-
-  export SERVICE_IP=$(kubectl get svc --namespace {{ .Release.Namespace }} {{ include "prometheus-pushgateway.fullname" (index .Subcharts "prometheus-pushgateway") }} -o jsonpath='{.status.loadBalancer.ingress[0].ip}')
-  echo http://$SERVICE_IP:{{ index .Values "prometheus-pushgateway" "service" "port" }}
-{{- else if contains "ClusterIP" $pushgateway_svc_type }}
-  export POD_NAME=$(kubectl get pods --namespace {{ .Release.Namespace }} -l "app={{ include "prometheus.name" (index .Subcharts "prometheus-pushgateway") }},component=pushgateway" -o jsonpath="{.items[0].metadata.name}")
-  kubectl --namespace {{ .Release.Namespace }} port-forward $POD_NAME 9091
-{{- end }}
-{{- end }}
-{{- end }}
-
 For more information on running Prometheus, visit:
 https://prometheus.io/
diff --git a/charts/prometheus/templates/_helpers.tpl b/charts/prometheus/templates/_helpers.tpl
index 00645db7..413989f7 100644
--- a/charts/prometheus/templates/_helpers.tpl
+++ b/charts/prometheus/templates/_helpers.tpl
@@ -26,36 +26,6 @@ chart: {{ template "prometheus.chart" . }}
 heritage: {{ .Release.Service }}
 {{- end -}}
 
-{{- define "prometheus.alertmanager.labels" -}}
-{{ include "prometheus.alertmanager.matchLabels" . }}
-{{ include "prometheus.common.metaLabels" . }}
-{{- end -}}
-
-{{- define "prometheus.alertmanager.matchLabels" -}}
-component: {{ .Values.alertmanager.name | quote }}
-{{ include "prometheus.common.matchLabels" . }}
-{{- end -}}
-
-{{- define "prometheus.nodeExporter.labels" -}}
-{{ include "prometheus.nodeExporter.matchLabels" . }}
-{{ include "prometheus.common.metaLabels" . }}
-{{- end -}}
-
-{{- define "prometheus.nodeExporter.matchLabels" -}}
-component: {{ .Values.nodeExporter.name | quote }}
-{{ include "prometheus.common.matchLabels" . }}
-{{- end -}}
-
-{{- define "prometheus.pushgateway.labels" -}}
-{{ include "prometheus.pushgateway.matchLabels" . }}
-{{ include "prometheus.common.metaLabels" . }}
-{{- end -}}
-
-{{- define "prometheus.pushgateway.matchLabels" -}}
-component: {{ .Values.pushgateway.name | quote }}
-{{ include "prometheus.common.matchLabels" . }}
-{{- end -}}
-
 {{- define "prometheus.server.labels" -}}
 {{ include "prometheus.server.matchLabels" . }}
 {{ include "prometheus.common.metaLabels" . }}
@@ -83,41 +53,6 @@ We truncate at 63 chars because some Kubernetes name fields are limited to this
 {{- end -}}
 {{- end -}}
 
-{{/*
-Create a fully qualified alertmanager name.
-We truncate at 63 chars because some Kubernetes name fields are limited to this (by the DNS naming spec).
-*/}}
-
-{{- define "prometheus.alertmanager.fullname" -}}
-{{- if .Values.alertmanager.fullnameOverride -}}
-{{- .Values.alertmanager.fullnameOverride | trunc 63 | trimSuffix "-" -}}
-{{- else -}}
-{{- $name := default .Chart.Name .Values.nameOverride -}}
-{{- if contains $name .Release.Name -}}
-{{- printf "%s-%s" .Release.Name .Values.alertmanager.name | trunc 63 | trimSuffix "-" -}}
-{{- else -}}
-{{- printf "%s-%s-%s" .Release.Name $name .Values.alertmanager.name | trunc 63 | trimSuffix "-" -}}
-{{- end -}}
-{{- end -}}
-{{- end -}}
-
-{{/*
-Create a fully qualified node-exporter name.
-We truncate at 63 chars because some Kubernetes name fields are limited to this (by the DNS naming spec).
-*/}}
-{{- define "prometheus.nodeExporter.fullname" -}}
-{{- if .Values.nodeExporter.fullnameOverride -}}
-{{- .Values.nodeExporter.fullnameOverride | trunc 63 | trimSuffix "-" -}}
-{{- else -}}
-{{- $name := default .Chart.Name .Values.nameOverride -}}
-{{- if contains $name .Release.Name -}}
-{{- printf "%s-%s" .Release.Name .Values.nodeExporter.name | trunc 63 | trimSuffix "-" -}}
-{{- else -}}
-{{- printf "%s-%s-%s" .Release.Name $name .Values.nodeExporter.name | trunc 63 | trimSuffix "-" -}}
-{{- end -}}
-{{- end -}}
-{{- end -}}
-
 {{/*
 Create a fully qualified Prometheus server name.
 We truncate at 63 chars because some Kubernetes name fields are limited to this (by the DNS naming spec).
@@ -135,23 +70,6 @@ We truncate at 63 chars because some Kubernetes name fields are limited to this
 {{- end -}}
 {{- end -}}
 
-{{/*
-Create a fully qualified pushgateway name.
-We truncate at 63 chars because some Kubernetes name fields are limited to this (by the DNS naming spec).
-*/}}
-{{- define "prometheus.pushgateway.fullname" -}}
-{{- if .Values.pushgateway.fullnameOverride -}}
-{{- .Values.pushgateway.fullnameOverride | trunc 63 | trimSuffix "-" -}}
-{{- else -}}
-{{- $name := default .Chart.Name .Values.nameOverride -}}
-{{- if contains $name .Release.Name -}}
-{{- printf "%s-%s" .Release.Name .Values.pushgateway.name | trunc 63 | trimSuffix "-" -}}
-{{- else -}}
-{{- printf "%s-%s-%s" .Release.Name $name .Values.pushgateway.name | trunc 63 | trimSuffix "-" -}}
-{{- end -}}
-{{- end -}}
-{{- end -}}
-
 {{/*
 Get KubeVersion removing pre-release information.
 */}}
@@ -231,39 +149,6 @@ Return if ingress supports pathType.
   {{- or (eq (include "ingress.isStable" .) "true") (and (eq (include "ingress.apiVersion" .) "networking.k8s.io/v1beta1") (semverCompare ">= 1.18.x" (include "prometheus.kubeVersion" .))) -}}
 {{- end -}}
 
-{{/*
-Create the name of the service account to use for the alertmanager component
-*/}}
-{{- define "prometheus.serviceAccountName.alertmanager" -}}
-{{- if .Values.serviceAccounts.alertmanager.create -}}
-    {{ default (include "prometheus.alertmanager.fullname" .) .Values.serviceAccounts.alertmanager.name }}
-{{- else -}}
-    {{ default "default" .Values.serviceAccounts.alertmanager.name }}
-{{- end -}}
-{{- end -}}
-
-{{/*
-Create the name of the service account to use for the nodeExporter component
-*/}}
-{{- define "prometheus.serviceAccountName.nodeExporter" -}}
-{{- if .Values.serviceAccounts.nodeExporter.create -}}
-    {{ default (include "prometheus.nodeExporter.fullname" .) .Values.serviceAccounts.nodeExporter.name }}
-{{- else -}}
-    {{ default "default" .Values.serviceAccounts.nodeExporter.name }}
-{{- end -}}
-{{- end -}}
-
-{{/*
-Create the name of the service account to use for the pushgateway component
-*/}}
-{{- define "prometheus.serviceAccountName.pushgateway" -}}
-{{- if .Values.serviceAccounts.pushgateway.create -}}
-    {{ default (include "prometheus.pushgateway.fullname" .) .Values.serviceAccounts.pushgateway.name }}
-{{- else -}}
-    {{ default "default" .Values.serviceAccounts.pushgateway.name }}
-{{- end -}}
-{{- end -}}
-
 {{/*
 Create the name of the service account to use for the server component
 */}}
diff --git a/charts/prometheus/templates/server/cm.yaml b/charts/prometheus/templates/server/cm.yaml
index 92693edb..2ebbfb63 100644
--- a/charts/prometheus/templates/server/cm.yaml
+++ b/charts/prometheus/templates/server/cm.yaml
@@ -48,40 +48,13 @@ data:
 {{- if $root.Values.extraScrapeConfigs }}
 {{ tpl $root.Values.extraScrapeConfigs $root | indent 4 }}
 {{- end -}}
-{{- if or ($root.Values.alertmanager.enabled) ($root.Values.server.alertmanagers) }}
+{{- if $root.Values.server.alertmanagers }}
     alerting:
 {{- if $root.Values.alertRelabelConfigs }}
 {{ $root.Values.alertRelabelConfigs | toYaml  | trimSuffix "\n" | indent 6 }}
 {{- end }}
       alertmanagers:
-{{- if $root.Values.server.alertmanagers }}
 {{ toYaml $root.Values.server.alertmanagers | indent 8 }}
-{{- else }}
-      - kubernetes_sd_configs:
-          - role: pod
-        tls_config:
-          ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
-        bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token
-        {{- if $root.Values.alertmanager.prefixURL }}
-        path_prefix: {{ $root.Values.alertmanager.prefixURL }}
-        {{- end }}
-        relabel_configs:
-        - source_labels: [__meta_kubernetes_namespace]
-          regex: {{ $root.Release.Namespace }}
-          action: keep
-        - source_labels: [__meta_kubernetes_pod_label_app]
-          regex: {{ template "prometheus.name" $root }}
-          action: keep
-        - source_labels: [__meta_kubernetes_pod_label_component]
-          regex: alertmanager
-          action: keep
-        - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_probe]
-          regex: {{ index $root.Values.alertmanager.podAnnotations "prometheus.io/probe" | default ".*" }}
-          action: keep
-        - source_labels: [__meta_kubernetes_pod_container_port_number]
-          regex: "9093"
-          action: keep
-{{- end -}}
 {{- end -}}
 {{- end -}}
 {{- end -}}
diff --git a/charts/prometheus/templates/server/deploy.yaml b/charts/prometheus/templates/server/deploy.yaml
index 45de5d18..3f327376 100644
--- a/charts/prometheus/templates/server/deploy.yaml
+++ b/charts/prometheus/templates/server/deploy.yaml
@@ -52,41 +52,6 @@ spec:
 {{ toYaml .Values.server.extraInitContainers | indent 8 }}
       {{- end }}
       containers:
-        {{- if .Values.configmapReload.prometheus.enabled }}
-        - name: {{ template "prometheus.name" . }}-{{ .Values.server.name }}-{{ .Values.configmapReload.prometheus.name }}
-          image: "{{ .Values.configmapReload.prometheus.image.repository }}:{{ .Values.configmapReload.prometheus.image.tag }}"
-          imagePullPolicy: "{{ .Values.configmapReload.prometheus.image.pullPolicy }}"
-          {{- with .Values.configmapReload.prometheus.containerSecurityContext }}
-          securityContext:
-            {{- toYaml . | nindent 12 }}
-          {{- end }}
-          args:
-            - --volume-dir=/etc/config
-            - --webhook-url=http://127.0.0.1:9090{{ .Values.server.prefixURL }}/-/reload
-          {{- range $key, $value := .Values.configmapReload.prometheus.extraArgs }}
-            - --{{ $key }}={{ $value }}
-          {{- end }}
-          {{- range .Values.configmapReload.prometheus.extraVolumeDirs }}
-            - --volume-dir={{ . }}
-          {{- end }}
-          {{- if .Values.configmapReload.prometheus.containerPort }}
-          ports:
-            - containerPort: {{ .Values.configmapReload.prometheus.containerPort }}
-          {{- end }}
-          resources:
-{{ toYaml .Values.configmapReload.prometheus.resources | indent 12 }}
-          volumeMounts:
-            - name: config-volume
-              mountPath: /etc/config
-              readOnly: true
-          {{- range .Values.configmapReload.prometheus.extraConfigmapMounts }}
-            - name: {{ $.Values.configmapReload.prometheus.name }}-{{ .name }}
-              mountPath: {{ .mountPath }}
-              subPath: {{ .subPath }}
-              readOnly: {{ .readOnly }}
-          {{- end }}
-        {{- end }}
-
         - name: {{ template "prometheus.name" . }}-{{ .Values.server.name }}
           image: "{{ .Values.server.image.repository }}:{{ .Values.server.image.tag }}"
           imagePullPolicy: "{{ .Values.server.image.pullPolicy }}"
@@ -279,11 +244,6 @@ spec:
           hostPath:
             path: {{ .hostPath }}
       {{- end }}
-      {{- range .Values.configmapReload.prometheus.extraConfigmapMounts }}
-        - name: {{ $.Values.configmapReload.prometheus.name }}-{{ .name }}
-          configMap:
-            name: {{ .configMap }}
-      {{- end }}
       {{- range .Values.server.extraConfigmapMounts }}
         - name: {{ $.Values.server.name }}-{{ .name }}
           configMap:
@@ -297,14 +257,6 @@ spec:
             optional: {{ . }}
             {{- end }}
       {{- end }}
-      {{- range .Values.configmapReload.prometheus.extraConfigmapMounts }}
-        - name: {{ .name }}
-          configMap:
-            name: {{ .configMap }}
-            {{- with .optional }}
-            optional: {{ . }}
-            {{- end }}
-      {{- end }}
 {{- if .Values.server.extraVolumes }}
 {{ toYaml .Values.server.extraVolumes | indent 8}}
 {{- end }}
diff --git a/charts/prometheus/templates/server/sts.yaml b/charts/prometheus/templates/server/sts.yaml
index f137d214..e6ed744a 100644
--- a/charts/prometheus/templates/server/sts.yaml
+++ b/charts/prometheus/templates/server/sts.yaml
@@ -52,41 +52,6 @@ spec:
 {{ toYaml .Values.server.extraInitContainers | indent 8 }}
       {{- end }}
       containers:
-        {{- if .Values.configmapReload.prometheus.enabled }}
-        - name: {{ template "prometheus.name" . }}-{{ .Values.server.name }}-{{ .Values.configmapReload.prometheus.name }}
-          image: "{{ .Values.configmapReload.prometheus.image.repository }}:{{ .Values.configmapReload.prometheus.image.tag }}"
-          imagePullPolicy: "{{ .Values.configmapReload.prometheus.image.pullPolicy }}"
-          {{- with .Values.configmapReload.prometheus.containerSecurityContext }}
-          securityContext:
-            {{- toYaml . | nindent 12 }}
-          {{- end }}
-          args:
-            - --volume-dir=/etc/config
-            - --webhook-url=http://127.0.0.1:9090{{ .Values.server.prefixURL }}/-/reload
-          {{- range $key, $value := .Values.configmapReload.prometheus.extraArgs }}
-            - --{{ $key }}={{ $value }}
-          {{- end }}
-          {{- range .Values.configmapReload.prometheus.extraVolumeDirs }}
-            - --volume-dir={{ . }}
-          {{- end }}
-          {{- if .Values.configmapReload.prometheus.containerPort }}
-          ports:
-            - containerPort: {{ .Values.configmapReload.prometheus.containerPort }}
-          {{- end }}
-          resources:
-{{ toYaml .Values.configmapReload.prometheus.resources | indent 12 }}
-          volumeMounts:
-            - name: config-volume
-              mountPath: /etc/config
-              readOnly: true
-          {{- range .Values.configmapReload.prometheus.extraConfigmapMounts }}
-            - name: {{ $.Values.configmapReload.prometheus.name }}-{{ .name }}
-              mountPath: {{ .mountPath }}
-              subPath: {{ .subPath }}
-              readOnly: {{ .readOnly }}
-          {{- end }}
-        {{- end }}
-
         - name: {{ template "prometheus.name" . }}-{{ .Values.server.name }}
           image: "{{ .Values.server.image.repository }}:{{ .Values.server.image.tag }}"
           imagePullPolicy: "{{ .Values.server.image.pullPolicy }}"
@@ -277,11 +242,6 @@ spec:
           hostPath:
             path: {{ .hostPath }}
       {{- end }}
-      {{- range .Values.configmapReload.prometheus.extraConfigmapMounts }}
-        - name: {{ $.Values.configmapReload.prometheus.name }}-{{ .name }}
-          configMap:
-            name: {{ .configMap }}
-      {{- end }}
       {{- range .Values.server.extraConfigmapMounts }}
         - name: {{ $.Values.server.name }}-{{ .name }}
           configMap:
@@ -295,14 +255,6 @@ spec:
             optional: {{ . }}
             {{- end }}
       {{- end }}
-      {{- range .Values.configmapReload.prometheus.extraConfigmapMounts }}
-        - name: {{ .name }}
-          configMap:
-            name: {{ .configMap }}
-            {{- with .optional }}
-            optional: {{ . }}
-            {{- end }}
-      {{- end }}
 {{- if .Values.server.extraVolumes }}
 {{ toYaml .Values.server.extraVolumes | indent 8}}
 {{- end }}
diff --git a/charts/prometheus/values.yaml b/charts/prometheus/values.yaml
index 7e257ff1..c3e5617a 100644
--- a/charts/prometheus/values.yaml
+++ b/charts/prometheus/values.yaml
@@ -15,654 +15,6 @@ serviceAccounts:
     name:
     annotations: {}
 
-alertmanager:
-  ## If false, alertmanager will not be installed
-  ##
-  enabled: true
-
-  # Default values for alertmanager.
-  # This is a YAML-formatted file.
-  # Declare variables to be passed into your templates.
-
-  image:
-    repository: quay.io/prometheus/alertmanager
-    tag: v0.24.0
-    pullPolicy: IfNotPresent
-
-  imagePullSecrets: []
-  nameOverride: ""
-  fullnameOverride: ""
-
-  livenessProbe:
-    httpGet:
-      path: /
-      port: http
-
-  readinessProbe:
-    httpGet:
-      path: /
-      port: http
-
-  ## Additional alertmanager container arguments
-  ##
-  extraArgs: {}
-
-  ## Additional Alertmanager Secret mounts
-  # Defines additional mounts with secrets. Secrets must be manually created in the namespace.
-  extraSecretMounts: []
-    # - name: secret-files
-    #   mountPath: /etc/secrets
-    #   subPath: ""
-    #   secretName: alertmanager-secret-files
-    #   readOnly: true
-
-  ingress:
-    ## If true, alertmanager Ingress will be created
-    ##
-    enabled: false
-
-    # For Kubernetes >= 1.18 you should specify the ingress-controller via the field ingressClassName
-    # See https://kubernetes.io/blog/2020/04/02/improvements-to-the-ingress-api-in-kubernetes-1.18/#specifying-the-class-of-an-ingress
-    className: ""
-
-    ## alertmanager Ingress annotations
-    ##
-    annotations: {}
-    #   kubernetes.io/ingress.class: nginx
-    #   kubernetes.io/tls-acme: 'true'
-
-    ## alertmanager Ingress hostnames with optional path
-    ## Must be provided if Ingress is enabled
-    ##
-    hosts: []
-      # - host: alertmanager.domain.com
-      #   paths:
-      #     - path: /
-      #       pathType: Prefix
-
-    ## Extra paths to prepend to every host configuration. This is useful when working with annotation based services.
-    extraPaths: []
-    # - path: /*
-    #   backend:
-    #     serviceName: ssl-redirect
-    #     servicePort: use-annotation
-
-    ## alertmanager Ingress TLS configuration
-    ## Secrets must be manually created in the namespace
-    ##
-    tls: []
-    #  - secretName: chart-example-tls
-    #    hosts:
-    #      - alertmanager.domain.com
-
-  ## Node tolerations for alertmanager scheduling to nodes with taints
-  ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/
-  ##
-  tolerations: []
-    # - key: "key"
-    #   operator: "Equal|Exists"
-    #   value: "value"
-    #   effect: "NoSchedule|PreferNoSchedule|NoExecute(1.6 only)"
-
-  ## Node labels for alertmanager pod assignment
-  ## Ref: https://kubernetes.io/docs/user-guide/node-selection/
-  ##
-  nodeSelector: {}
-
-  ## Pod affinity
-  ##
-  affinity: {}
-
-  ## PodDisruptionBudget settings
-  # Ref: https://kubernetes.io/docs/tasks/run-application/configure-pdb/
-  #      https://kubernetes.io/docs/concepts/workloads/pods/disruptions/
-  podDisruptionBudget: {}
-    # maxUnavailable: 1
-    # minAvailable: 1
-
-  persistence:
-    ## If true, alertmanager will create/use a Persistent Volume Claim
-    ## If false, use emptyDir
-    ##
-    enabled: true
-
-    ## alertmanager data Persistent Volume access modes
-    ## Must match those of existing PV or dynamic provisioner
-    ## Ref: http://kubernetes.io/docs/user-guide/persistent-volumes/
-    ##
-    accessModes:
-      - ReadWriteOnce
-
-    ## alertmanager data Persistent Volume size
-    ##
-    size: 2Gi
-
-    ## alertmanager data Persistent Volume Storage Class
-    ## If defined, storageClassName: <storageClass>
-    ## If set to "-", storageClassName: "", which disables dynamic provisioning
-    ## If undefined (the default) or set to null, no storageClassName spec is
-    ##   set, choosing the default provisioner.  (gp2 on AWS, standard on
-    ##   GKE, AWS & OpenStack)
-    ##
-    # storageClass: "-"
-
-  ## Annotations to be added to alertmanager pods
-  ##
-  podAnnotations: {}
-    ## Tell prometheus to use a specific set of alertmanager pods
-    ## instead of all alertmanager pods found in the same namespace
-    ## Useful if you deploy multiple releases within the same namespace
-    ##
-    ## prometheus.io/probe: alertmanager-teamA
-
-  ## Labels to be added to Prometheus AlertManager pods
-  ##
-  podLabels: {}
-
-  ## Use a StatefulSet if replicaCount needs to be greater than 1 (see below)
-  ##
-  replicaCount: 1
-
-  statefulSet:
-    annotations: {}
-
-  ## alertmanager resource requests and limits
-  ## Ref: http://kubernetes.io/docs/user-guide/compute-resources/
-  ##
-  resources: {}
-    # limits:
-    #   cpu: 10m
-    #   memory: 32Mi
-    # requests:
-    #   cpu: 10m
-    #   memory: 32Mi
-
-  # Custom DNS configuration to be added to alertmanager pods
-  dnsConfig: {}
-    # nameservers:
-    #   - 1.2.3.4
-    # searches:
-    #   - ns1.svc.cluster-domain.example
-    #   - my.dns.search.suffix
-    # options:
-    #   - name: ndots
-    #     value: "2"
-    #   - name: edns0
-
-  ## Security context to be added to alertmanager pods
-  ##
-  podSecurityContext:
-    runAsUser: 65534
-    runAsNonRoot: true
-    runAsGroup: 65534
-    fsGroup: 65534
-
-  ## Security context to be added to alertmanager container
-  ##
-  securityContext: {}
-    # capabilities:
-    #   drop:
-    #   - ALL
-    # readOnlyRootFilesystem: true
-
-  service:
-    annotations: {}
-    clusterPort: 9094
-    loadBalancerIP: ""  # Assign ext IP when Service type is LoadBalancer
-    loadBalancerSourceRanges: []  # Only allow access to loadBalancerIP from these IPs
-    port: 9093
-    # if you want to force a specific nodePort. Must be use with service.type=NodePort
-    # nodePort:
-    type: ClusterIP
-
-  ## List of initial peers
-  ## Ref: https://github.com/prometheus/alertmanager/blob/main/README.md#high-availability
-  additionalPeers: []
-
-  ## Pod anti-affinity can prevent the scheduler from placing Alertmanager replicas on the same node.
-  ## The default value "soft" means that the scheduler should *prefer* to not schedule two replica pods onto the same node but no guarantee is provided.
-  ## The value "hard" means that the scheduler is *required* to not schedule two replica pods onto the same node.
-  ## The value "" will disable pod anti-affinity so that no anti-affinity rules will be configured.
-  ##
-  podAntiAffinity: ""
-
-  ## If anti-affinity is enabled sets the topologyKey to use for anti-affinity.
-  ## This can be changed to, for example, failure-domain.beta.kubernetes.io/zone
-  ##
-  podAntiAffinityTopologyKey: kubernetes.io/hostname
-
-  ## Topology spread constraints rely on node labels to identify the topology domain(s) that each Node is in.
-  ## Ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/
-  topologySpreadConstraints: []
-    # - maxSkew: 1
-    #   topologyKey: failure-domain.beta.kubernetes.io/zone
-    #   whenUnsatisfiable: DoNotSchedule
-    #   labelSelector:
-    #     matchLabels:
-    #       app.kubernetes.io/instance: alertmanager
-
-
-  command: []
-
-  config:
-    global: {}
-      # slack_api_url: ''
-
-    templates:
-      - '/etc/alertmanager/*.tmpl'
-
-    receivers:
-      - name: default-receiver
-        # slack_configs:
-        #  - channel: '@you'
-        #    send_resolved: true
-
-    route:
-      group_wait: 10s
-      group_interval: 5m
-      receiver: default-receiver
-      repeat_interval: 3h
-
-  ## Monitors ConfigMap changes and POSTs to a URL
-  ## Ref: https://github.com/jimmidyson/configmap-reload
-  ##
-  configmapReload:
-    ## If false, the configmap-reload container will not be deployed
-    ##
-    enabled: true
-
-    ## configmap-reload container name
-    ##
-    name: configmap-reload
-
-    ## configmap-reload container image
-    ##
-    image:
-      repository: jimmidyson/configmap-reload
-      tag: v0.8.0
-      pullPolicy: IfNotPresent
-
-    # containerPort: 9533
-
-    ## configmap-reload resource requests and limits
-    ## Ref: http://kubernetes.io/docs/user-guide/compute-resources/
-    ##
-    resources: {}
-
-  templates: {}
-  #   alertmanager.tmpl: |-
-
-  serviceAccount:
-    # Specifies whether a service account should be created
-    create: true
-    # Annotations to add to the service account
-    annotations: {}
-    # The name of the service account to use.
-    # If not set and create is true, a name is generated using the fullname template
-    name:
-
-## Monitors ConfigMap changes and POSTs to a URL
-## Ref: https://github.com/jimmidyson/configmap-reload
-##
-configmapReload:
-  prometheus:
-    ## If false, the configmap-reload container will not be deployed
-    ##
-    enabled: true
-
-    ## configmap-reload container name
-    ##
-    name: configmap-reload
-
-    ## configmap-reload container image
-    ##
-    image:
-      repository: jimmidyson/configmap-reload
-      tag: v0.5.0
-      pullPolicy: IfNotPresent
-
-    # containerPort: 9533
-
-    ## Additional configmap-reload container arguments
-    ##
-    extraArgs: {}
-    ## Additional configmap-reload volume directories
-    ##
-    extraVolumeDirs: []
-
-
-    ## Additional configmap-reload mounts
-    ##
-    extraConfigmapMounts: []
-      # - name: prometheus-alerts
-      #   mountPath: /etc/alerts.d
-      #   subPath: ""
-      #   configMap: prometheus-alerts
-      #   readOnly: true
-
-    ## Security context to be added to configmap-reload container
-    containerSecurityContext: {}
-
-    ## configmap-reload resource requests and limits
-    ## Ref: http://kubernetes.io/docs/user-guide/compute-resources/
-    ##
-    resources: {}
-
-kubeStateMetrics:
-  ## If false, kube-state-metrics sub-chart will not be installed
-  ##
-  enabled: true
-
-## kube-state-metrics sub-chart configurable values
-## Please see https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-state-metrics
-##
-# kube-state-metrics:
-
-## promtheus-node-exporter sub-chart configurable values
-## Please see https://github.com/prometheus-community/helm-charts/tree/main/charts/prometheus-node-exporter
-##
-prometheus-node-exporter:
-  ## If false, node-exporter will not be installed
-  ##
-  enabled: true
-
-  # Expose the service to the host network
-  hostNetwork: true
-
-  # Share the host process ID namespace
-  hostPID: true
-
-  # Mount the node's root file system (/) at /host/root in the container
-  hostRootFsMount:
-    enabled: true
-    # Defines how new mounts in existing mounts on the node or in the container
-    # are propagated to the container or node, respectively. Possible values are
-    # None, HostToContainer, and Bidirectional. If this field is omitted, then
-    # None is used. More information on:
-    # https://kubernetes.io/docs/concepts/storage/volumes/#mount-propagation
-    mountPropagation: HostToContainer
-
-  image:
-    repository: quay.io/prometheus/node-exporter
-    # Overrides the image tag whose default is {{ printf "v%s" .Chart.AppVersion }}
-    tag: ""
-    pullPolicy: IfNotPresent
-    sha: ""
-
-  imagePullSecrets: []
-  # - name: "image-pull-secret"
-
-  rbac:
-    ## If true, create & use RBAC resources
-    ##
-    create: true
-    ## If true, create & use Pod Security Policy resources
-    ## https://kubernetes.io/docs/concepts/policy/pod-security-policy/
-    pspEnabled: false
-    pspAnnotations: {}
-      ## Specify pod annotations
-      ## Ref: https://kubernetes.io/docs/concepts/policy/pod-security-policy/#apparmor
-      ## Ref: https://kubernetes.io/docs/concepts/policy/pod-security-policy/#seccomp
-      ## Ref: https://kubernetes.io/docs/concepts/policy/pod-security-policy/#sysctl
-      ##
-      # seccomp.security.alpha.kubernetes.io/allowedProfileNames: '*'
-      # seccomp.security.alpha.kubernetes.io/defaultProfileName: 'docker/default'
-      # apparmor.security.beta.kubernetes.io/defaultProfileName: 'runtime/default'
-
-  ## Assign a PriorityClassName to pods if set
-  ##
-  # priorityClassName: ""
-
-  ## Customize the updateStrategy if set
-  ##
-  updateStrategy:
-    type: RollingUpdate
-    rollingUpdate:
-      maxUnavailable: 1
-
-  ## Additional InitContainers to initialize the pod
-  ##
-  extraInitContainers: []
-
-  ## Additional mounts from the host to node-exporter container
-  ##
-  extraHostVolumeMounts: []
-  #  - name: <mountName>
-  #    hostPath: <hostPath>
-  #    mountPath: <mountPath>
-  #    readOnly: true|false
-  #    mountPropagation: None|HostToContainer|Bidirectional
-
-  ## Additional configmaps to be mounted.
-  ##
-  configmaps: []
-  # - name: <configMapName>
-  #   mountPath: <mountPath>
-  secrets: []
-  # - name: <secretName>
-  #   mountPath: <mountPatch>
-
-  ## Node tolerations for node-exporter scheduling to nodes with taints
-  ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/
-  ##
-  tolerations:
-    - effect: NoSchedule
-      operator: Exists
-
-  ## Assign a nodeSelector if operating a hybrid cluster
-  ##
-  nodeSelector: {}
-  #   beta.kubernetes.io/arch: amd64
-  #   beta.kubernetes.io/os: linux
-
-  # Annotations to be added to node exporter pods
-  podAnnotations:
-    # Fix for very slow GKE cluster upgrades
-    cluster-autoscaler.kubernetes.io/safe-to-evict: "true"
-
-  # Extra labels to be added to node exporter pods
-  podLabels: {}
-
-  # Additional environment variables that will be passed to the daemonset
-  env: {}
-    # VARIABLE: value
-
-  prometheus:
-    monitor:
-      enabled: false
-      additionalLabels: {}
-      namespace: ""
-
-      jobLabel: ""
-
-      scheme: http
-      basicAuth: {}
-      bearerTokenFile:
-      tlsConfig: {}
-
-      ## proxyUrl: URL of a proxy that should be used for scraping.
-      ##
-      proxyUrl: ""
-
-      ## Override serviceMonitor selector
-      ##
-      selectorOverride: {}
-
-      relabelings: []
-      metricRelabelings: []
-      interval: ""
-      scrapeTimeout: 10s
-      ## prometheus.monitor.apiVersion ApiVersion for the serviceMonitor Resource(defaults to "monitoring.coreos.com/v1")
-      apiVersion: ""
-
-      ## SampleLimit defines per-scrape limit on number of scraped samples that will be accepted.
-      ##
-      sampleLimit: 0
-
-      ## TargetLimit defines a limit on the number of scraped targets that will be accepted.
-      ##
-      targetLimit: 0
-
-      ## Per-scrape limit on number of labels that will be accepted for a sample. Only valid in Prometheus versions 2.27.0 and newer.
-      ##
-      labelLimit: 0
-
-      ## Per-scrape limit on length of labels name that will be accepted for a sample. Only valid in Prometheus versions 2.27.0 and newer.
-      ##
-      labelNameLengthLimit: 0
-
-      ## Per-scrape limit on length of labels value that will be accepted for a sample. Only valid in Prometheus versions 2.27.0 and newer.
-      ##
-      labelValueLengthLimit: 0
-
-  ## node-exporter resource limits & requests
-  ## Ref: https://kubernetes.io/docs/user-guide/compute-resources/
-  ##
-  resources: {}
-    # We usually recommend not to specify default resources and to leave this as a conscious
-    # choice for the user. This also increases chances charts run on environments with little
-    # resources, such as Minikube. If you do want to specify resources, uncomment the following
-    # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
-    # limits:
-    #   cpu: 200m
-    #   memory: 50Mi
-    # requests:
-    #   cpu: 100m
-    #   memory: 30Mi
-
-  containerSecurityContext:
-    allowPrivilegeEscalation: false
-    # capabilities:
-    #   add:
-    #   - SYS_TIME
-
-  # Custom DNS configuration to be added to prometheus-node-exporter pods
-  dnsConfig: {}
-  # nameservers:
-  #   - 1.2.3.4
-  # searches:
-  #   - ns1.svc.cluster-domain.example
-  #   - my.dns.search.suffix
-  # options:
-  #   - name: ndots
-  #     value: "2"
-  #   - name: edns0
-
-  serviceAccount:
-    # Specifies whether a ServiceAccount should be created
-    create: true
-    # The name of the ServiceAccount to use.
-    # If not set and create is true, a name is generated using the fullname template
-    name:
-    annotations: {}
-    imagePullSecrets: []
-    automountServiceAccountToken: false
-
-  securityContext:
-    fsGroup: 65534
-    runAsGroup: 65534
-    runAsNonRoot: true
-    runAsUser: 65534
-
-  service:
-    type: ClusterIP
-    port: 9100
-    targetPort: 9100
-    nodePort:
-    portName: metrics
-    listenOnAllInterfaces: true
-    annotations:
-      prometheus.io/scrape: "true"
-
-  # for deployments that have node_exporter deployed outside of the cluster, list
-  # their addresses here
-  endpoints: []
-
-  ## Assign a group of affinity scheduling rules
-  ##
-  affinity: {}
-  #   nodeAffinity:
-  #     requiredDuringSchedulingIgnoredDuringExecution:
-  #       nodeSelectorTerms:
-  #         - matchFields:
-  #             - key: metadata.name
-  #               operator: In
-  #               values:
-  #                 - target-host-name
-
-  ## set to true to add the release label so scraping of the servicemonitor with kube-prometheus-stack works out of the box
-  releaseLabel: false
-
-  ## Override the deployment namespace
-  ##
-  namespaceOverride: ""
-
-  ## Additional containers for export metrics to text file
-  ##
-  sidecars: []
-  ##  - name: nvidia-dcgm-exporter
-  ##    image: nvidia/dcgm-exporter:1.4.3
-
-  ## Volume for sidecar containers
-  ##
-  sidecarVolumeMount: []
-  ##  - name: collector-textfiles
-  ##    mountPath: /run/prometheus
-  ##    readOnly: false
-
-  ## Additional mounts from the host to sidecar containers
-  ##
-  sidecarHostVolumeMounts: []
-  #  - name: <mountName>
-  #    hostPath: <hostPath>
-  #    mountPath: <mountPath>
-  #    readOnly: true|false
-  #    mountPropagation: None|HostToContainer|Bidirectional
-
-  ## Liveness probe
-  ##
-  livenessProbe:
-    failureThreshold: 3
-    httpGet:
-      httpHeaders: []
-      scheme: http
-    initialDelaySeconds: 0
-    periodSeconds: 10
-    successThreshold: 1
-    timeoutSeconds: 1
-
-  ## Readiness probe
-  ##
-  readinessProbe:
-    failureThreshold: 3
-    httpGet:
-      httpHeaders: []
-      scheme: http
-    initialDelaySeconds: 0
-    periodSeconds: 10
-    successThreshold: 1
-    timeoutSeconds: 1
-
-  # Enable vertical pod autoscaler support for prometheus-node-exporter
-  verticalPodAutoscaler:
-    enabled: false
-    # List of resources that the vertical pod autoscaler can control. Defaults to cpu and memory
-    controlledResources: []
-
-    # Define the max allowed resources for the pod
-    maxAllowed: {}
-    # cpu: 200m
-    # memory: 100Mi
-    # Define the min allowed resources for the pod
-    minAllowed: {}
-    # cpu: 200m
-    # memory: 100Mi
-
-    # updatePolicy:
-      # Specifies whether recommended updates are applied when a Pod is started and whether recommended updates
-      # are applied during the life of a Pod. Possible values are "Off", "Initial", "Recreate", and "Auto".
-      # updateMode: Auto
-
 server:
   ## Prometheus server container name
   ##
@@ -1199,369 +551,6 @@ server:
   #     labels:
   #   {{- include "prometheus.server.labels" . | nindent 4 }}
 
-prometheus-pushgateway:
-  ## If false, pushgateway will not be installed
-  ##
-  enabled: true
-
-  # Provide a name in place of prometheus-pushgateway for `app:` labels
-  nameOverride: ""
-
-  # Provide a name to substitute for the full names of resources
-  fullnameOverride: ""
-
-  ## pushgateway container image
-  ##
-  image:
-    repository: prom/pushgateway
-    tag: v1.4.3
-    pullPolicy: IfNotPresent
-
-  ## pushgateway priorityClassName
-  ##
-  priorityClassName: ""
-
-  ## Additional pushgateway container arguments
-  ##
-  ## example:
-  ## extraArgs:
-  ##  - --persistence.file=/data/pushgateway.data
-  ##  - --persistence.interval=5m
-  extraArgs: []
-
-  ## Additional InitContainers to initialize the pod
-  ##
-  extraInitContainers: []
-
-  ## Configure ingress resource that allow you to access the
-  ## pushgateway installation. Set up the URL
-  ## ref: http://kubernetes.io/docs/user-guide/ingress/
-  ##
-  ingress:
-    ## Enable Ingress.
-    ##
-    enabled: false
-
-    # For Kubernetes >= 1.18 you should specify the ingress-controller via the field ingressClassName
-    # See https://kubernetes.io/blog/2020/04/02/improvements-to-the-ingress-api-in-kubernetes-1.18/#specifying-the-class-of-an-ingress
-    # AWS ALB requires path of /*
-    # className: "nginx"
-
-    ## Annotations.
-    ##
-    annotations: {}
-    #   kubernetes.io/ingress.class: nginx
-    #   kubernetes.io/tls-acme: 'true'
-
-    ## pushgateway Ingress hostnames with optional path
-    ## Must be provided if Ingress is enabled.
-    ##
-    hosts: []
-    #   - pushgateway.domain.com
-    #   - domain.com/pushgateway
-
-    path: /
-
-    # pathType is only for k8s >= 1.18
-    pathType: Prefix
-
-    ## Extra paths to prepend to every host configuration. This is useful when working with annotation based services.
-    extraPaths: []
-    # - path: /*
-    #   backend:
-    #     serviceName: ssl-redirect
-    #     servicePort: use-annotation
-
-    ## pushgateway Ingress TLS configuration
-    ## Secrets must be manually created in the namespace.
-    ##
-    tls: []
-    #   - secretName: pushgateway-tls
-    #     hosts:
-    #       - pushgateway.domain.com
-
-  ## Node tolerations for pushgateway scheduling to nodes with taints
-  ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/
-  ##
-  tolerations: {}
-    # - key: "key"
-    #   operator: "Equal|Exists"
-    #   value: "value"
-    #   effect: "NoSchedule|PreferNoSchedule|NoExecute(1.6 only)"
-
-  ## Node labels for pushgateway pod assignment
-  ## Ref: https://kubernetes.io/docs/user-guide/node-selection/
-  ##
-  nodeSelector: {}
-
-  ## Annotations to be added to pushgateway pods
-  ##
-  podAnnotations: {}
-
-  ## Labels to be added to pushgateway pods
-  ##
-  podLabels: {}
-
-  replicaCount: 1
-
-  # The values to set in the PodDisruptionBudget spec (minAvailable/maxUnavailable)
-  # If not set then a PodDisruptionBudget will not be created
-  podDisruptionBudget: {}
-    # enabled: false
-    # maxUnavailable: 1
-
-  resources: {}
-    # We usually recommend not to specify default resources and to leave this as a conscious
-    # choice for the user. This also increases chances charts run on environments with little
-    # resources, such as Minikube. If you do want to specify resources, uncomment the following
-    # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
-    # limits:
-    #   cpu: 200m
-    #   memory: 50Mi
-    # requests:
-    #   cpu: 100m
-    #   memory: 30Mi
-
-  ## Security context to be added to push-gateway pods
-  ##
-  securityContext:
-    fsGroup: 65534
-    runAsUser: 65534
-    runAsNonRoot: true
-
-  ## Security context to be added to push-gateway containers
-  ## Having a separate variable as securityContext differs for pods and containers.
-  containerSecurityContext: {}
-  #  allowPrivilegeEscalation: false
-  #  readOnlyRootFilesystem: true
-  #  runAsUser: 65534
-  #  runAsNonRoot: true
-
-  # Optional service annotations
-  serviceAnnotations:
-    prometheus.io/probe: pushgateway
-
-  # Optional service labels
-  serviceLabels: {}
-
-  service:
-    targetPort: 9091
-
-    # Optional - Can be used for headless if value is "None"
-    clusterIP: ""
-
-    loadBalancerIP: ""
-    loadBalancerSourceRanges: []
-    port: 9091
-    type: ClusterIP
-
-  ## pushgateway Deployment Strategy type
-  # strategy:
-  #   type: Recreate
-
-  # Optional persistentVolume labels
-  persistentVolumeLabels: {}
-
-  persistentVolume:
-    ## If true, pushgateway will create/use a Persistent Volume Claim
-    ## If false, use emptyDir
-    ##
-    enabled: false
-
-    ## pushgateway data Persistent Volume access modes
-    ## Must match those of existing PV or dynamic provisioner
-    ## Ref: http://kubernetes.io/docs/user-guide/persistent-volumes/
-    ##
-    accessModes:
-      - ReadWriteOnce
-
-    ## pushgateway data Persistent Volume Claim annotations
-    ##
-    annotations: {}
-
-    ## pushgateway data Persistent Volume existing claim name
-    ## Requires pushgateway.persistentVolume.enabled: true
-    ## If defined, PVC must be created manually before volume will be bound
-    existingClaim: ""
-
-    ## pushgateway data Persistent Volume mount root path
-    ##
-    mountPath: /data
-
-    ## pushgateway data Persistent Volume size
-    ##
-    size: 2Gi
-
-    ## pushgateway data Persistent Volume Storage Class
-    ## If defined, storageClassName: <storageClass>
-    ## If set to "-", storageClassName: "", which disables dynamic provisioning
-    ## If undefined (the default) or set to null, no storageClassName spec is
-    ##   set, choosing the default provisioner.  (gp2 on AWS, standard on
-    ##   GKE, AWS & OpenStack)
-    ##
-    # storageClass: "-"
-
-    ## Subdirectory of pushgateway data Persistent Volume to mount
-    ## Useful if the volume's root directory is not empty
-    ##
-    subPath: ""
-
-  extraVolumes: []
-    # - name: extra
-    #   emptyDir: {}
-
-  extraVolumeMounts: []
-    # - name: extra
-    #   mountPath: /usr/share/extras
-    #   readOnly: true
-
-  # Optional serviceAccount labels
-  serviceAccountLabels: {}
-
-  # Optional pod imagePullSecrets
-  imagePullSecrets: []
-
-  # Optional additional environment variables
-  extraVars: []
-
-  # Optional additional containers (sidecar)
-  extraContainers: []
-    # - name: oAuth2-proxy
-    #   args:
-    #     - -https-address=:9092
-    #     - -upstream=http://localhost:9091
-    #     - -skip-auth-regex=^/metrics
-    #     - -openshift-delegate-urls={"/":{"group":"monitoring.coreos.com","resource":"prometheuses","verb":"get"}}
-    #   image: openshift/oauth-proxy:v1.1.0
-    #   ports:
-    #       - containerPort: 9092
-    #         name: proxy
-    #   resources:
-    #       limits:
-    #         memory: 16Mi
-    #       requests:
-    #         memory: 4Mi
-    #         cpu: 20m
-    #   volumeMounts:
-    #     - mountPath: /etc/prometheus/secrets/pushgateway-tls
-    #       name: secret-pushgateway-tls
-
-  liveness:
-    enabled: true
-    probe:
-      httpGet:
-        path: /-/ready
-        port: 9091
-      initialDelaySeconds: 10
-      timeoutSeconds: 10
-
-  readiness:
-    enabled: true
-    probe:
-      httpGet:
-        path: /-/ready
-        port: 9091
-      initialDelaySeconds: 10
-      timeoutSeconds: 10
-
-  serviceAccount:
-    # Specifies whether a ServiceAccount should be created
-    create: true
-    # The name of the ServiceAccount to use.
-    # If not set and create is true, a name is generated using the fullname template
-    name:
-
-  ## When running more than one replica alongside with persistence, different volumes are needed
-  ## per replica, since sharing a `persistence.file` across replicas does not keep metrics synced.
-  ## For this purpose, you can enable the `runAsStatefulSet` to deploy the pushgateway as a
-  ## StatefulSet instead of as a Deployment.
-  runAsStatefulSet: false
-
-  ## Affinity for pod assignment
-  ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
-  affinity: {}
-
-  ## Topology spread constraints for pods
-  ## Ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/
-  topologySpreadConstraints: []
-
-  # Enable this if you're using https://github.com/coreos/prometheus-operator
-  serviceMonitor:
-    enabled: false
-    namespace: monitoring
-
-    # Fallback to the prometheus default unless specified
-    # interval: 10s
-
-    ## scheme: HTTP scheme to use for scraping. Can be used with `tlsConfig` for example if using istio mTLS.
-    # scheme: ""
-
-    ## tlsConfig: TLS configuration to use when scraping the endpoint. For example if using istio mTLS.
-    ## Of type: https://github.com/coreos/prometheus-operator/blob/master/Documentation/api.md#tlsconfig
-    # tlsConfig: {}
-
-    # bearerTokenFile:
-    # Fallback to the prometheus default unless specified
-    # scrapeTimeout: 30s
-
-    ## Used to pass Labels that are used by the Prometheus installed in your cluster to select Service Monitors to work with
-    ## ref: https://github.com/coreos/prometheus-operator/blob/master/Documentation/api.md#prometheusspec
-    additionalLabels: {}
-
-    # Retain the job and instance labels of the metrics pushed to the Pushgateway
-    # [Scraping Pushgateway](https://github.com/prometheus/pushgateway#configure-the-pushgateway-as-a-target-to-scrape)
-    honorLabels: true
-
-    ## Metric relabel configs to apply to samples before ingestion.
-    ## [Metric Relabeling](https://prometheus.io/docs/prometheus/latest/configuration/configuration/#metric_relabel_configs)
-    metricRelabelings: []
-    # - action: keep
-    #   regex: 'kube_(daemonset|deployment|pod|namespace|node|statefulset).+'
-    #   sourceLabels: [__name__]
-
-    ## Relabel configs to apply to samples before ingestion.
-    ## [Relabeling](https://prometheus.io/docs/prometheus/latest/configuration/configuration/#relabel_config)
-    relabelings: []
-    # - sourceLabels: [__meta_kubernetes_pod_node_name]
-    #   separator: ;
-    #   regex: ^(.*)$
-    #   targetLabel: nodename
-    #   replacement: $1
-    #   action: replace
-
-  # Configuration for clusters with restrictive network policies in place:
-  # - allowAll allows access to the PushGateway from any namespace
-  # - customSelector is a list of pod/namespaceSelectors to allow access from
-  # These options are mutually exclusive and the latter will take precedence.
-  networkPolicy: {}
-    # allowAll: true
-    # customSelectors:
-    #   - namespaceSelector:
-    #       matchLabels:
-    #         type: admin
-    #   - podSelector:
-    #       matchLabels:
-    #         app: myapp
-
-## alertmanager ConfigMap entries
-##
-alertmanagerFiles:
-  alertmanager.yml:
-    global: {}
-      # slack_api_url: ''
-
-    receivers:
-      - name: default-receiver
-        # slack_configs:
-        #  - channel: '@you'
-        #    send_resolved: true
-
-    route:
-      group_wait: 10s
-      group_interval: 5m
-      receiver: default-receiver
-      repeat_interval: 3h
-
 ## Prometheus server ConfigMap entries for rule files (allow prometheus labels interpolation)
 ruleFiles: {}
 
-- 
2.31.0

