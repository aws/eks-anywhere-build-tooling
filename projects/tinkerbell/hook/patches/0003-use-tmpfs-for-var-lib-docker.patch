From 8586e02060c732bf65566f78d2b0bd597b382254 Mon Sep 17 00:00:00 2001
From: Prow Bot <prow@amazonaws.com>
Date: Thu, 29 Aug 2024 01:08:55 +0000
Subject: [PATCH 3/5] use tmpfs for var/lib/docker

---
 images/hook-embedded/pull-images.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/images/hook-embedded/pull-images.sh b/images/hook-embedded/pull-images.sh
index 45bf18d..6689946 100755
--- a/images/hook-embedded/pull-images.sh
+++ b/images/hook-embedded/pull-images.sh
@@ -69,7 +69,7 @@ function main() {
     # will change the permissions of the bind mount directory (images/) to root.
     echo -e "Starting DinD container"
     echo -e "-----------------------"
-    docker run -d --privileged --name "${dind_container}" -v "${PWD}/images_tar":/images_tar -v "${PWD}"/images/:/var/lib/docker-embedded/ -d "${dind_container_image}"
+    docker run -d --privileged --mount type=tmpfs,destination=/var/lib/docker --name "${dind_container}" -v "${PWD}/images_tar":/images_tar -v "${PWD}"/images/:/var/lib/docker-embedded/ -d "${dind_container_image}"
 
     # wait until the docker daemon is ready
     until docker exec "${dind_container}" docker info &> /dev/null; do
-- 
2.49.0

